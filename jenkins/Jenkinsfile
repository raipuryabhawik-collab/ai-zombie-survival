pipeline {
    agent any

    stages {

        stage('Clone') {
            steps { checkout scm }
        }

        stage('Build') {
            steps {
                sh 'docker compose -f docker/docker-compose.yml build'
            }
        }

        stage('Test') {
            parallel {
                stage('Unit Test') {
                    steps { sh 'echo Running unit tests...' }
                }
                stage('Lint Check') {
                    steps { sh 'echo Checking lint...' }
                }
            }
        }

        stage('Deploy') {
            steps {
                sh 'docker compose -f docker/docker-compose.yml up -d'
            }
        }

        stage('Monitoring') {
            steps {
                sh 'echo Prometheus & Grafana running'
            }
        }
    }
}
